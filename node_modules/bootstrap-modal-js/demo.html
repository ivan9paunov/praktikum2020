<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
  <link rel="stylesheet" href="demoFiles/bootstrap.min.css">
  <title>bootstrap-modal-js dynamic demo</title>
  <meta name="description"
        content="Use Bootstrap’s JavaScript modal plugin to add dialogs to your site for lightboxes, user notifications, or completely custom content.">
  <meta name="keywords"
        content="Bootstrap,Bootstrap5,Modal,dynamic,show.bs.modal,shown.bs.modal,hide.bs.modal,hidden.bs.modal">
  <script>
    function close_all_modals() {
      let all_modals = document.querySelectorAll('.modal');
      let all_modals_length = all_modals.length;
      for (let i = 0; i < all_modals_length; i++) {
        let x = bootstrap.Modal.getInstance(all_modals[i]);
        x.hide();
      }
    }
  </script>
</head>
<body>
<div class="container">
  <div class="my-5 p-3 border rounded">
    <a class="my-2 btn btn-block btn-outline-secondary" href="https://zhangchenglin.github.io/bootstrap-modal-js/"
       target="_blank" title="How To Use">How To Use</a>
    <div class="mb-3 p-2 border rounded">
      <label for="title">标题</label>
      <label for="title">title</label>
      <div class="input-group mb-3">
        <span class="input-group-text bg-success text-white">title</span>
        <input type="text" class="form-control border-success" id="title" placeholder="请输入标题"
               value="default title">
      </div>
      <div class="mb-2 custom-control custom-switch">
        <input type="checkbox" class="form-check-input" id="titleFunctionSwitch">
        <label class="form-check-label" for="titleFunctionSwitch">Use Function control title content.
          （使用函数控制title内容）</label>
      </div>
      <div class="w-75 input-group mb-3 d-none">
        <label class="input-group-text bg-success text-white" for="titleFunctionSelect">Function
          Examples</label>
        <select class="form-select border-success" id="titleFunctionSelect">
          <option class="form-select-lg" value="return_title" selected>return_title</option>
          <option class="form-select-lg" value="return_body">return_body</option>
          <option class="form-select-lg" value="return_footer">return_footer</option>
          <option class="form-select-lg" value="calc_number">calc_number</option>
          <option class="form-select-lg" value="return_Fun_HTML_Element">return_Fun_HTML_Element</option>
        </select>
      </div>
    </div>

    <div class="mb-3 p-2 border rounded">
      <label for="body">内容</label>
      <label for="body">body</label>
      <div>测试长内容的时候请增加body的内容来查看效果。</div>
      <div>When testing long content, please increase the content of the body to see the effect.</div>
      <div class="input-group mb-3">
        <span class="input-group-text bg-success text-white">body</span>
        <textarea rows="4" class="form-control border-success" id="body" placeholder="请输入正文内容">this is default body content.</textarea>
      </div>
      <div class="mb-2 custom-control custom-switch">
        <input type="checkbox" class="form-check-input" id="bodyFunctionSwitch">
        <label class="form-check-label" for="bodyFunctionSwitch">Use
          Function control body content. （使用函数控制body内容）</label>
      </div>
      <div class="w-75 input-group mb-3 d-none">
        <label class="input-group-text bg-success text-white" for="bodyFunctionSelect">Function
          Examples</label>
        <select class="form-select border-success" id="bodyFunctionSelect">
          <option class="form-select-lg" value="return_title">return_title</option>
          <option class="form-select-lg" value="return_body" selected>return_body</option>
          <option class="form-select-lg" value="return_footer">return_footer</option>
          <option class="form-select-lg" value="calc_number">calc_number</option>
          <option class="form-select-lg" value="return_Fun_HTML_Element">return_Fun_HTML_Element</option>
        </select>
      </div>
    </div>

    <div class="mb-3 p-2 border rounded">
      <label for="footer">底部</label>
      <label for="footer">footer</label>
      <div class="input-group mb-3">
        <span class="input-group-text bg-success text-white">footer</span>
        <textarea rows="9" class="form-control border-success" id="footer" placeholder="请输入底部内容">
<div>
<div>this is some code. footer is built with<a href="https://getbootstrap.com/docs/4.3/utilities/flex/" target="_blank">&nbsp;flexbox</a>
</div>
<input type="button" class="btn btn-outline-success" data-dismiss="modal" value="Close">
<input type="button" class="btn btn-outline-success" onclick="close_all_modals()" value="Close All">
<button type="button" class="btn btn-primary" onclick="alert('Saved');">Save changes</button>
</div></textarea>
      </div>
      <div class="mb-2 custom-control custom-switch">
        <input type="checkbox" class="form-check-input" id="footerFunctionSwitch">
        <label class="form-check-label" for="footerFunctionSwitch">Use
          Function control footer content. （使用函数控制footer内容）</label>
      </div>
      <div class="w-75 input-group mb-3 d-none">
        <label class="input-group-text bg-success text-white" for="footerFunctionSelect">Function
          Examples</label>
        <select class="form-select border-success" id="footerFunctionSelect">
          <option class="form-select-lg" value="return_title">return_title</option>
          <option class="form-select-lg" value="return_body">return_body</option>
          <option class="form-select-lg" value="return_footer" selected>return_footer</option>
          <option class="form-select-lg" value="calc_number">calc_number</option>
          <option class="form-select-lg" value="return_Fun_HTML_Element">return_Fun_HTML_Element</option>
        </select>
      </div>
    </div>

    <div class="mb-3 p-2 border rounded">
      <div>模态框尺寸</div>
      <div>ModalSizes</div>
      <div class="input-group">
        <label class="input-group-text bg-success text-white" for="ModalSizes">ModalSizes</label>
        <select class="form-select border-success" id="ModalSizes">
          <option value="">default</option>
          <option value="sm">sm</option>
          <option value="lg">lg</option>
          <option value="xl">xl</option>
          <option value="modal-fullscreen">modal-fullscreen</option>
          <option value="modal-fullscreen-sm-down">modal-fullscreen-sm-down</option>
          <option value="modal-fullscreen-md-down">modal-fullscreen-md-down</option>
          <option value="modal-fullscreen-lg-down">modal-fullscreen-lg-down</option>
          <option value="modal-fullscreen-xl-down">modal-fullscreen-xl-down</option>
          <option value="custom" disabled>custom (disabled)</option>
        </select>
      </div>
    </div>

    <div class="d-lg-flex justify-content-around">
      <div class="mb-3 p-3 border border-secondary rounded">
        <div>模态框垂直居中</div>
        <div>VerticallyCentered</div>
        <div class="custom-control custom-radio form-check-inline">
          <input class="form-check-input" type="radio" name="VerticallyCentered"
                 id="VerticallyCentered_true"
                 value="1">
          <label class="form-check-label" for="VerticallyCentered_true"
                 title="true"> true </label>
        </div>
        <div class="custom-control custom-radio form-check-inline">
          <input class="form-check-input" type="radio" name="VerticallyCentered"
                 id="VerticallyCentered_false"
                 value="">
          <label class="form-check-label" for="VerticallyCentered_false"
                 title="default"> false </label>
        </div>
      </div>

      <div class="mb-3 p-3 border border-secondary rounded">
        <div>长内容滚动方式</div>
        <div>LongContentType</div>
        <div class="custom-control custom-radio form-check-inline">
          <input class="form-check-input" type="radio" name="LongContentType" id="LongContentType_true"
                 value="1">
          <label class="form-check-label" for="LongContentType_true"
                 title="true"> true </label>
        </div>
        <div class="custom-control custom-radio form-check-inline">
          <input class="form-check-input" type="radio" name="LongContentType" id="LongContentType_false"
                 value="">
          <label class="form-check-label" for="LongContentType_false"
                 title="default"> false </label>
        </div>
      </div>
    </div>

    <div class="mb-3 p-3 d-lg-flex justify-content-around border border-secondary rounded">
      <div class="p-3 border rounded">
        <div>事件类型</div>
        <span class="d-block">如果使用的时候，EventType 和 CallbackFunction 必须同时存在</span>
        <div>EventType</div>
        <span class="d-block">EventType and CallbackFunction must exist at the same time if used</span>
        <div class="mb-2 custom-control custom-radio form-check-inline">
          <input class="form-check-input" type="radio" name="EventType" id="EventType_show" value="show">
          <label class="form-check-label" for="EventType_show"
                 title="show.bs.modal"> show </label>
        </div>
        <div class="mb-2 custom-control custom-radio form-check-inline">
          <input class="form-check-input" type="radio" name="EventType" id="EventType_shown"
                 value="shown">
          <label class="form-check-label" for="EventType_shown"
                 title="shown.bs.modal"> shown </label>
        </div>
        <div class="mb-2 custom-control custom-radio form-check-inline">
          <input class="form-check-input" type="radio" name="EventType" id="EventType_hide" value="hide">
          <label class="form-check-label" for="EventType_hide"
                 title="hide.bs.modal"> hide </label>
        </div>
        <div class="mb-2 custom-control custom-radio form-check-inline">
          <input class="form-check-input" type="radio" name="EventType" id="EventType_hidden" value="hidden">
          <label class="form-check-label" for="EventType_hidden"
                 title="hidden.bs.modal"> hidden </label>
        </div>
        <div class="mb-2 custom-control custom-radio form-check-inline">
          <input class="form-check-input" type="radio" name="EventType" id="EventType_hidePrevented"
                 value="hidePrevented">
          <label class="form-check-label" for="EventType_hidePrevented" title="hidePrevented.bs.modal">
            hidePrevented </label>
        </div>
      </div>


      <div class="p-3 border rounded">
        <div>
          <span class="d-block">事件回调函数</span>
          <span class="d-block">如果使用的时候，EventType 和 CallbackFunction 必须同时存在</span>
          <span class="d-block">CallbackFunction</span>
          <span class="d-block">EventType and CallbackFunction must exist at the same time if used</span>
        </div>
        <div class="my-2 input-group rounded">
          <label class="input-group-text bg-success text-white"
                 for="CallbackFunction">CallbackFunction</label>
          <select class="form-select border-success" id="CallbackFunction">
            <option class="form-select-lg" value="">default</option>
            <option class="form-select-lg" value="alert_some_text">alert_some_text</option>
            <option class="form-select-lg" value="console_log_some_text">console_log_some_text</option>
            <option class="form-select-lg" value="get_number">get_number</option>
          </select>
        </div>
      </div>
    </div>

    <div class="mb-3 p-3 border border-secondary rounded">
      <div>选项</div>
      <div>Options</div>
      <div class="mb-2 p-2 border">
        <div class="form-check form-switch form-check-inline">
          <input type="checkbox" name="backdrop" class="form-check-input" id="backdrop" checked>
          <label class="form-check-label" for="backdrop">backdrop</label>
        </div>
        <div class="form-check form-check-inline">
          <input type="checkbox" name="backdrop" class="form-check-input" id="backdrop_static" disabled>
          <label class="form-check-label" for="backdrop_static">backdrop_static</label>
        </div>
      </div>
      <div class="mb-2 form-check form-switch form-check-inline">
        <input type="checkbox" class="form-check-input" id="keyboard" checked>
        <label class="form-check-label" for="keyboard">keyboard</label>
      </div>
      <div class="mb-2 form-check form-switch form-check-inline">
        <input type="checkbox" class="form-check-input" id="focus" checked>
        <label class="form-check-label" for="focus">focus</label>
      </div>
      <div class="mb-2 form-check form-switch form-check-inline">
        <input type="checkbox" class="form-check-input" id="show" checked>
        <label class="form-check-label" for="show">show</label>
      </div>
    </div>

    <a class="fixed-bottom btn btn-lg btn-block btn-outline-success bg-dark" href="javascript:"
       id="bs_modal_click" style="z-index:1051;">Click to generate modal box</a>

    <div>
      <hr class="mt-5 border border-dark">
      <span class="d-block">CallbackFunction代码示例</span>
      <span class="d-block">CallbackFunction code example</span>
      <div class="input-group">
<textarea rows="21" class="form-control" disabled readonly aria-label="Functions Raw Code">
function alert_some_text() {
    alert("Use Bootstrap’s JavaScript modal plugin to add dialogs to your site for lightboxes, user notifications, or completely custom content");
}

function console_log_some_text() {
    console.log("Use Bootstrap’s JavaScript modal plugin to add dialogs to your site for lightboxes, user notifications, or completely custom content");
}

function return_number() {
    return 222 + 333;
}

function get_number() {
    alert(return_number());
}

function calc_number() {
    return (1 + 2 + 3).toString();
}

function return_title() {
    return "function title";
}

function return_body() {
    return "function body";
}

function return_footer() {
    return "function footer";
}

function return_Fun_HTML_Element() {
    const html = document.createElement("div");
    const p = document.createElement("p");
    html.className = "bg-success";
    p.className = "text-center";
    p.innerHTML = "this is html obj.";
    html.appendChild(p);
    return html;
}
</textarea>
      </div>
    </div>

  </div>
</div>


<div>
  <script src="demoFiles/bootstrap.bundle.min.js"></script>
  <script src="dist/bootstrap-modal-js.min.js"></script>
  <!--<script src="src/bootstrap-modal-js.js"></script>-->

  <div>
    <script>
      function alert_some_text() {
        alert("Use Bootstrap’s JavaScript modal plugin to add dialogs to your site for lightboxes, user notifications, or completely custom content");
      }

      function console_log_some_text() {
        console.log("Use Bootstrap’s JavaScript modal plugin to add dialogs to your site for lightboxes, user notifications, or completely custom content");
      }

      function return_number() {
        return 222 + 333;
      }

      function get_number() {
        alert(return_number());
      }

      function calc_number() {
        return (1 + 2 + 3).toString();
      }

      function return_title() {
        return "function title";
      }

      function return_body() {
        return "function body";
      }

      function return_footer() {
        return "function footer";
      }

      function return_obj() {
        return {
          "aaa": "111",
          "bbb": "222",
          "ccc": "333",
        };
      }

      function return_Fun_HTML_Element() {
        const html = document.createElement("div");
        const p = document.createElement("p");
        html.className = "bg-success";
        p.className = "text-center";
        p.innerHTML = "this is html obj.";
        html.appendChild(p);
        return html;
      }
    </script>
  </div>
</div>

<script>
  (function () {
    const bs_modal_click = document.querySelector("#bs_modal_click");
    bs_modal_click.addEventListener("click", function () {

      const title_value = checkbox_status("titleFunction") ? select_function_value("titleFunction") : select_value("title");
      const body_value = checkbox_status("bodyFunction") ? select_function_value("bodyFunction") : select_value("body");
      const footer_value = checkbox_status("footerFunction") ? select_function_value("footerFunction") : select_value("footer");
      const ModalSizes_value = select_value("ModalSizes");
      const VerticallyCentered_value = radio_boolean_value("VerticallyCentered");
      const LongContentType_value = radio_boolean_value("LongContentType");
      const EventType_value = radio_value("EventType");
      const CallbackFunction = select_value("CallbackFunction");
      const CallbackFunction_value = CallbackFunction ? eval(CallbackFunction) : "";
      const Options_obj_value = get_checkbox_arr_value(["backdrop", "keyboard", "focus", "show"]);

      bootstrapModalJs(title_value, body_value, footer_value, ModalSizes_value, VerticallyCentered_value, LongContentType_value, EventType_value, CallbackFunction_value, Options_obj_value);
    });

    function get_checkbox_arr_value(arr) {
      const obj = {};
      for (const i of arr) {
        const dom = document.querySelector("#" + i);
        dom.checked ? obj[i] = true : (dom.id !== 'backdrop' ? obj[i] = false : obj[i] = get_backdrop_static_checkbox_value());
      }
      return obj;
    }

    let backdrop_switch = document.querySelector('#backdrop');
    let backdrop_static_checkbox = document.querySelector('#backdrop_static');
    backdrop_switch.addEventListener('click', function () {
      if (backdrop_switch.checked === false) {
        backdrop_static_checkbox.removeAttribute('disabled');
      } else {
        backdrop_static_checkbox.checked = false;
        backdrop_static_checkbox.setAttribute('disabled', '');
      }
    });

    function get_backdrop_static_checkbox_value() {
      if (backdrop_static_checkbox.checked === true) {
        return 'static';
      } else {
        return false;
      }
    }

    function checkbox_status(id) {
      const checkbox = document.querySelector("#" + id + "Switch");
      return checkbox.checked === true ? true : "";
    }

    function select_function_value(id) {
      const fun_name = document.querySelector("#" + id + "Select").value;
      return eval(fun_name);
    }

    function select_value(id) {
      const option = document.querySelector("#" + id);
      return option.value;
    }

    function radio_value(name) {
      const radio = document.querySelectorAll("[name='" + name + "']");
      let radioValue;
      for (let i = 0; i < radio.length; i++) {
        if (radio[i].checked === true) {
          radioValue = radio[i].value;
          break;
        }
      }
      return radioValue;
    }

    function radio_boolean_value(name) {
      let radio = document.querySelectorAll("[name='" + name + "']");
      let radioValue;
      for (let i = 0; i < radio.length; i++) {
        if (radio[i].checked === true) {
          radioValue = radio[i].value;
          break;
        }
      }
      return Boolean(radioValue);
    }

    function_swicth("titleFunction");
    function_swicth("bodyFunction");
    function_swicth("footerFunction");

    function function_swicth(id) {
      let swicth = document.querySelector("#" + id + "Switch");
      let select = document.querySelector("#" + id + "Select");
      swicth.addEventListener("click", function () {
        select.parentElement.classList.toggle("d-none");
      })
    }
  })();
</script>


</body>
</html>
